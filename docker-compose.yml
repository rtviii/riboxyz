version: '3.8'
services:
  django:
    env_file:
        - ./.env
    build:
      context: .
      dockerfile: Dockerfile-django
    container_name: django
    restart: always
    ports:
      - 8000:8000
    volumes:
      - type: bind
        source: ${RIBETL_DATA:?err}
        target: /home/RIBETL_DATA

      # *FOR LIVE DEVELOPMENT -----------------------|
      # - What this does is it mounts the local version
      #   of the ribxz folder to the container's /home/ribxz
      # So instead of just a static mounted version inside the container,
      # the changes made to the local ribxz folder will be reflected inside the container 
      # while it is running. 
      - ./ribxz_api:/home/ribxz_api                    #|  <--- DEV ONLY
      #* --------------------------------------------|

    # environment:
    #   - NEO4J_URI=bolt://neo:7687
    #   - NEO4J_USER=neo4j
    #   - NEO4J_PASSWORD=ribosomexyz
    #   - NEO4J_CURRENTDB=neo4j

    # links:
    #   - neo
    # depends_on:
    #   - neo
  # neo:
  #   hostname: neo
  #   container_name: neo
  #   restart: always
  #   build:
  #     context: .
  #     dockerfile: Dockerfile-neo4j
  #   ports:
  #     - 7473:7473
  #     - 7474:7474
  #     - 7687:7687

  #   volumes:
  #     - /opt/ribxz_neo4j_volume/plugins:/plugins
  #     - /opt/ribxz_neo4j_volume/data:/data

  #     - type  : bind
  #       source: ${RIBETL_DATA:?err}
  #       target: /import

volumes:
  django:
  # neo:
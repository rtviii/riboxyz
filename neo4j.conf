

# Memory Settings
server.memory.pagecache.size=4GB                    # Keep this as is - good for your dataset size
dbms.memory.heap.initial_size=4GB                   # Start with larger heap to avoid resizing
dbms.memory.heap.max_size=4GB                       # Match initial size to avoid heap resizing overhead

# Transaction Settings
dbms.memory.transaction.total.max=4GB               # Reduced from 10GB - more reasonable for your RAM
dbms.transaction.timeout=300s                       # Add timeout to prevent hanging transactions
dbms.transaction.concurrent.maximum=32              # 8x number of cores is a good rule of thumb
dbms.transaction.state.memory.allocation=ON_HEAP    # Better memory management for your setup

# Connection Settings (keeping your existing settings)
server.default_listen_address=0.0.0.0
server.bolt.enabled=true
server.discovery.advertised_address=neo:5000
server.cluster.advertised_address=neo:6000
server.cluster.raft.advertised_address=neo:7000
server.routing.advertised_address=neo:7688

# Security Settings (keeping your existing settings)
dbms.security.auth_enabled=false
dbms.security.procedures.unrestricted=apoc.*
dbms.security.procedures.allowlist=apoc.*

# Additional Performance Settings
dbms.memory.off_heap.max_size=2GB                   # Limit off-heap to prevent OOM
dbms.jvm.additional=-XX:+UseG1GC                   # Use G1 garbage collector
dbms.jvm.additional=-XX:+ExitOnOutOfMemoryError    # Fail fast on OOM instead of hanging
dbms.threads.worker_count=4                        # Match your CPU core count

# Query Settings
dbms.track_query_cpu_time=true                     # Help identify problematic queries
dbms.track_query_allocation=true                   # Monitor memory allocation
cypher.min_replan_interval=1000ms                  # Prevent frequent query replanning

# Write Operation Settings
dbms.checkpoint.interval.time=15m                  # More frequent checkpoints
dbms.checkpoint.interval.tx=100000                 # Checkpoint after this many transactions
dbms.tx_log.rotation.retention_policy=1 days       # Maintain logs for recovery